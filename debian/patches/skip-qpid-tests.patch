Description: Skip qpid if its not installed.
Author: Chuck Short <zulcss@ubuntu.com>
Fowarded: No
diff -Naurp oslo.messaging-1.3.0.orig/tests/test_qpid.py oslo.messaging-1.3.0/tests/test_qpid.py
--- oslo.messaging-1.3.0.orig/tests/test_qpid.py	2014-04-01 08:21:03.000000000 -0400
+++ oslo.messaging-1.3.0/tests/test_qpid.py	2014-04-01 10:36:14.715171885 -0400
@@ -18,7 +18,10 @@ import threading
 import time
 
 import mock
-import qpid
+try:
+    import qpid
+except ImportError:
+    qpid = False
 import testscenarios
 
 from oslo import messaging
@@ -64,6 +67,8 @@ class _QpidBaseTestCase(test_utils.BaseT
 
     def setUp(self):
         super(_QpidBaseTestCase, self).setUp()
+        if qpid is False:
+            self.skipTest('QPID is not installed')
         self.messaging_conf.transport_driver = 'qpid'
         self.fake_qpid = not _is_qpidd_service_running()
 
@@ -395,6 +400,9 @@ class TestQpidReconnectOrder(test_utils.
     """
 
     def test_reconnect_order(self):
+        if qpid is False:
+            self.skipTest('qpid is not installed')
+
         brokers = ['host1', 'host2', 'host3', 'host4', 'host5']
         brokers_count = len(brokers)
 
